
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>dorado.routines &#8212; dorado 1.0.0 documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="dorado.parallel_routing" href="parallelrouting.html" />
    <link rel="prev" title="dorado.particle_tools" href="particletools.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="module-dorado.routines">
<span id="dorado-routines"></span><span id="routines"></span><h1>dorado.routines<a class="headerlink" href="#module-dorado.routines" title="Permalink to this headline">¶</a></h1>
<p>Higher level methods for routing and visualizing tracer particles.</p>
<p>Project Homepage: <a class="reference external" href="https://github.com/passaH2O/dorado">https://github.com/passaH2O/dorado</a></p>
<dl class="function">
<dt id="dorado.routines.animate_plots">
<code class="descclassname">dorado.routines.</code><code class="descname">animate_plots</code><span class="sig-paren">(</span><em>start_val</em>, <em>end_val</em>, <em>folder_name</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dorado/routines.html#animate_plots"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dorado.routines.animate_plots" title="Permalink to this definition">¶</a></dt>
<dd><p>Animation routine, requires an optional animation writer.</p>
<p>Routine to make mp4 animation of the particle routing from png outputs
of the previous plotting routines.</p>
<p><strong>Inputs</strong> :</p>
<blockquote>
<div><dl>
<dt>start_val<span class="classifier"><cite>int</cite></span></dt><dd><p>Number of first plot to use</p>
</dd>
<dt>end_val<span class="classifier"><cite>int</cite></span></dt><dd><p>Number of last plot to use</p>
</dd>
<dt>folder_name<span class="classifier"><cite>str</cite></span></dt><dd><p>Name of output folder to get results from</p>
</dd>
</dl>
</div></blockquote>
<p><strong>Outputs</strong> :</p>
<blockquote>
<div><p>Saves an mp4 animation to the results folder</p>
</div></blockquote>
</dd></dl>

<dl class="function">
<dt id="dorado.routines.draw_travel_path">
<code class="descclassname">dorado.routines.</code><code class="descname">draw_travel_path</code><span class="sig-paren">(</span><em>depth</em>, <em>walk_data</em>, <em>particles_to_follow='all'</em>, <em>output_file='travel_paths.png'</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dorado/routines.html#draw_travel_path"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dorado.routines.draw_travel_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Make a plot with the travel path of specified particles drawn out.</p>
<p><strong>Inputs</strong> :</p>
<blockquote>
<div><dl>
<dt>depth<span class="classifier"><cite>numpy.ndarray</cite></span></dt><dd><p>Water depth array.</p>
</dd>
<dt>walk_data<span class="classifier"><cite>dict</cite></span></dt><dd><p>Output of <cite>steady_plots</cite>, <cite>unsteady_plots</cite>, <cite>time_plots</cite>, as well
as the <cite>particle_track.run_iteration</cite> method.</p>
</dd>
<dt>particles_to_follow<span class="classifier"><cite>list</cite>, optional</span></dt><dd><p>List of particle numbers for which to draw the travel paths.
Default is <cite>all</cite> particles.</p>
</dd>
<dt>output_file<span class="classifier"><cite>str</cite>, optional</span></dt><dd><p>Path to save the output image to.</p>
</dd>
</dl>
</div></blockquote>
<p><strong>Outputs</strong> :</p>
<blockquote>
<div><p>Saves a plot of particle travel paths.</p>
</div></blockquote>
</dd></dl>

<dl class="function">
<dt id="dorado.routines.get_state">
<code class="descclassname">dorado.routines.</code><code class="descname">get_state</code><span class="sig-paren">(</span><em>walk_data</em>, <em>iteration=-1</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dorado/routines.html#get_state"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dorado.routines.get_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Pull walk_data values from a specific iteration.</p>
<p>Routine to return slices of the walk_data dict at a given iteration #.
This function provides a shortcut to ‘smart’ indexing of the dict.
By default returns information on the most recent step</p>
<p><strong>Inputs</strong> :</p>
<blockquote>
<div><dl>
<dt>walk_data<span class="classifier"><cite>dict</cite></span></dt><dd><p>Dictionary of all x and y locations and travel times</p>
</dd>
<dt>iteration<span class="classifier"><cite>int</cite>, optional</span></dt><dd><p>Iteration number at which to slice the dictionary. Defaults
to -1, i.e. the most recent step</p>
</dd>
</dl>
</div></blockquote>
<p><strong>Outputs</strong> :</p>
<blockquote>
<div><dl>
<dt>xinds<span class="classifier"><cite>list</cite></span></dt><dd><p>List containing equivalent of walk_data[‘xinds’][:][iteration]</p>
</dd>
<dt>yinds<span class="classifier"><cite>list</cite></span></dt><dd><p>List containing equivalent of walk_data[‘yinds’][:][iteration]</p>
</dd>
<dt>times<span class="classifier"><cite>list</cite></span></dt><dd><p>List containing equivalent of
walk_data[‘travel_times’][:][iteration]</p>
</dd>
</dl>
</div></blockquote>
</dd></dl>

<dl class="function">
<dt id="dorado.routines.get_time_state">
<code class="descclassname">dorado.routines.</code><code class="descname">get_time_state</code><span class="sig-paren">(</span><em>walk_data</em>, <em>target_time</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dorado/routines.html#get_time_state"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dorado.routines.get_time_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Pull walk_data values nearest to a specific time.</p>
<p>Routine to return slices of the walk_data dict at a given travel time.
This function provides a shortcut to ‘smart’ indexing of the dict.</p>
<p><strong>Inputs</strong> :</p>
<blockquote>
<div><dl>
<dt>walk_data<span class="classifier"><cite>dict</cite></span></dt><dd><p>Dictionary of all x and y locations and travel times</p>
</dd>
<dt>target_time<span class="classifier"><cite>float</cite>, optional</span></dt><dd><p>Travel time at which to slice the dictionary.</p>
</dd>
</dl>
</div></blockquote>
<p><strong>Outputs</strong> :</p>
<blockquote>
<div><dl>
<dt>xinds<span class="classifier"><cite>list</cite></span></dt><dd><p>List containing equivalent of walk_data[‘xinds’][:][i], where i
represents the index at which travel time is nearest to input.</p>
</dd>
<dt>yinds<span class="classifier"><cite>list</cite></span></dt><dd><p>List containing equivalent of walk_data[‘yinds’][:][i], where i
represents the index at which travel time is nearest to input.</p>
</dd>
<dt>times<span class="classifier"><cite>list</cite></span></dt><dd><p>List containing equivalent of walk_data[‘travel_times’][:][i],
where i represents the index at which travel time is nearest
to input. Times will differ slightly from input time due to
the nature of the method.</p>
</dd>
</dl>
</div></blockquote>
</dd></dl>

<dl class="function">
<dt id="dorado.routines.plot_exposure_time">
<code class="descclassname">dorado.routines.</code><code class="descname">plot_exposure_time</code><span class="sig-paren">(</span><em>walk_data</em>, <em>exposure_times</em>, <em>folder_name=None</em>, <em>timedelta=1</em>, <em>nbins=100</em>, <em>save_output=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dorado/routines.html#plot_exposure_time"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dorado.routines.plot_exposure_time" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot exposure time distribution of particles in a specified region.</p>
<p>Function to plot the exposure time distribution (ETD) of particles to
the specified region. Relies on the output of particle_track.exposure_time</p>
<p><strong>Inputs</strong> :</p>
<blockquote>
<div><dl>
<dt>walk_data<span class="classifier"><cite>dict</cite></span></dt><dd><p>Output of a previous function call to run_iteration.</p>
</dd>
<dt>exposure_times<span class="classifier"><cite>list</cite></span></dt><dd><p>List [] of floats containing the output of
particle_track.exposure_time</p>
</dd>
<dt>folder_name<span class="classifier"><cite>str</cite>, optional</span></dt><dd><p>Path to folder in which to save output plots.</p>
</dd>
<dt>timedelta<span class="classifier"><cite>int or float</cite>, optional</span></dt><dd><p>Unit of time for time-axis of ETD plots, specified as time
in seconds (e.g. an input of 60 plots things by minute).</p>
</dd>
<dt>nbins<span class="classifier"><cite>int</cite>, optional</span></dt><dd><p>Number of bins to use as the time axis for differential ETD.
Using fewer bins smoothes out curves.</p>
</dd>
<dt>save_output<span class="classifier"><cite>bool</cite>, optional</span></dt><dd><p>Controls whether or not the output images/data are saved to disk.
Default value is True.</p>
</dd>
</dl>
</div></blockquote>
<p><strong>Outputs</strong> :</p>
<blockquote>
<div><p>If <cite>save_output</cite> is set to True, script saves plots of the cumulative
and differential forms of the ETD as a png and the list of exposure
times as a json (‘human-readable’) text file.</p>
</div></blockquote>
</dd></dl>

<dl class="function">
<dt id="dorado.routines.plot_state">
<code class="descclassname">dorado.routines.</code><code class="descname">plot_state</code><span class="sig-paren">(</span><em>grid</em>, <em>walk_data</em>, <em>iteration=-1</em>, <em>target_time=None</em>, <em>c='b'</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dorado/routines.html#plot_state"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dorado.routines.plot_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot particle positions on an array.</p>
<p><strong>Inputs</strong> :</p>
<blockquote>
<div><dl>
<dt>grid<span class="classifier"><cite>numpy.ndarray</cite></span></dt><dd><p>A 2-D grid upon which the particles will be plotted. Examples of
grids that might be nice to use are <cite>params.depth</cite>, <cite>params.stage</cite>,
<cite>params.topography</cite>.</p>
</dd>
<dt>walk_data<span class="classifier"><cite>dict</cite></span></dt><dd><p>The dictionary with the particle information. This is the output
from one of the other routines or the
:obj:particle_track.run_iteration() function.</p>
</dd>
<dt>iteration<span class="classifier"><cite>int</cite>, optional</span></dt><dd><p>Iteration number at which to plot the particles. Default is -1,
i.e. the most recent step</p>
</dd>
<dt>target_time<span class="classifier"><cite>float</cite>, optional</span></dt><dd><p>Travel time at which to plot the particles. If specified, iteration
is ignored.</p>
</dd>
<dt>c<span class="classifier"><cite>str</cite>, optional</span></dt><dd><p>String to specify the color of the particle marks to draw on the
figure, default is ‘b’ for blue</p>
</dd>
</dl>
</div></blockquote>
<p><strong>Outputs</strong> :</p>
<blockquote>
<div><dl>
<dt>ax<span class="classifier"><cite>matplotlib.axes</cite></span></dt><dd><p>A <cite>matplotlib.axes</cite> with the intended plot drawn on it</p>
</dd>
</dl>
</div></blockquote>
</dd></dl>

<dl class="function">
<dt id="dorado.routines.steady_plots">
<code class="descclassname">dorado.routines.</code><code class="descname">steady_plots</code><span class="sig-paren">(</span><em>params</em>, <em>num_iter</em>, <em>folder_name=None</em>, <em>save_output=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dorado/routines.html#steady_plots"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dorado.routines.steady_plots" title="Permalink to this definition">¶</a></dt>
<dd><p>Automated particle movement in steady flow field.</p>
<p>Function to automate plotting of particle movement over a steady flow
fields. Particles all have same number of iterations and are allowed to
have different travel times.</p>
<p><strong>Inputs</strong> :</p>
<blockquote>
<div><dl>
<dt>params<span class="classifier"><cite>obj</cite></span></dt><dd><p>Class of parameter values for the particles</p>
</dd>
<dt>num_iter<span class="classifier"><cite>int</cite></span></dt><dd><p>Number of iterations to move particles over</p>
</dd>
<dt>folder_name<span class="classifier"><cite>str</cite>, optional</span></dt><dd><p>Path to folder in which to save output plots.</p>
</dd>
<dt>save_output<span class="classifier"><cite>bool</cite>, optional</span></dt><dd><p>Controls whether or not the output images/data are saved to disk.
Default value is True.</p>
</dd>
</dl>
</div></blockquote>
<p><strong>Outputs</strong> :</p>
<blockquote>
<div><dl>
<dt>walk_data<span class="classifier"><cite>dict</cite></span></dt><dd><p>Dictionary of all x and y locations and travel times</p>
</dd>
</dl>
<p>If <cite>save_output</cite> is set to True, script saves result of each iteration
to a folder with the figure for each iteration as a png and the data
with the particle locations and travel times as a json
(‘human-readable’) text file.</p>
</div></blockquote>
</dd></dl>

<dl class="function">
<dt id="dorado.routines.time_plots">
<code class="descclassname">dorado.routines.</code><code class="descname">time_plots</code><span class="sig-paren">(</span><em>params</em>, <em>num_iter</em>, <em>folder_name=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dorado/routines.html#time_plots"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dorado.routines.time_plots" title="Permalink to this definition">¶</a></dt>
<dd><p>Steady flow plots with particle travel times visualized.</p>
<p>Make plots with each particle’s travel time visualized.
Routine assumes a steady flow field, but could be expanded to an unsteady
case.</p>
<p><strong>Inputs</strong> :</p>
<blockquote>
<div><dl>
<dt>params<span class="classifier"><cite>obj</cite></span></dt><dd><p>Parameters for the particle</p>
</dd>
<dt>num_iter<span class="classifier"><cite>int</cite></span></dt><dd><p>Number of iterations to move particles</p>
</dd>
<dt>folder_name<span class="classifier"><cite>str</cite>, optional</span></dt><dd><p>Path to folder in which to save output plots.</p>
</dd>
</dl>
</div></blockquote>
<p><strong>Outputs</strong> :</p>
<blockquote>
<div><dl>
<dt>walk_data<span class="classifier"><cite>dict</cite></span></dt><dd><p>Dictionary of all x and y locations and travel times</p>
</dd>
</dl>
<p>Saves plots and data for each iteration</p>
</div></blockquote>
</dd></dl>

<dl class="function">
<dt id="dorado.routines.unsteady_plots">
<code class="descclassname">dorado.routines.</code><code class="descname">unsteady_plots</code><span class="sig-paren">(</span><em>params</em>, <em>num_steps</em>, <em>timestep</em>, <em>output_base</em>, <em>output_type</em>, <em>folder_name=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dorado/routines.html#unsteady_plots"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dorado.routines.unsteady_plots" title="Permalink to this definition">¶</a></dt>
<dd><p>Automated particle movement in unsteady flow.</p>
<p>Function to automate plotting of particle movement in an unsteady flow
field (time-varying). Particles all have the same travel time at the end
of each timestep and are allowed to have a different number of iterations.
Flow field variables (qx, qy, depth) are updated after each timestep.
Because this function makes very specific assumptions about your model
output files, feel free to use this as a template and change
the section that updates the flow field.</p>
<p><strong>Inputs</strong> :</p>
<blockquote>
<div><dl>
<dt>params<span class="classifier"><cite>obj</cite></span></dt><dd><p>Class of particle parameter values</p>
</dd>
<dt>num_steps<span class="classifier"><cite>int</cite></span></dt><dd><p>Number of model timesteps being covered</p>
</dd>
<dt>timestep<span class="classifier"><cite>float</cite></span></dt><dd><p>Model timestep duration (seconds)</p>
</dd>
<dt>output_base<span class="classifier"><cite>str</cite></span></dt><dd><p>Filepath string locating hydrodynamic output files</p>
</dd>
<dt>output_type<span class="classifier"><cite>str</cite></span></dt><dd><p>Filetype string of the output files. Currently accepts ‘csv’,
‘npy’, and ‘npz’. Assumes filenames begin with either ‘depth’,
‘stage’, ‘qx’, ‘qy’, or ‘data’, followed by timestep information
(limited built-in support, may require modification)</p>
</dd>
<dt>folder_name<span class="classifier"><cite>str</cite>, optional</span></dt><dd><p>Path to folder in which to save output plots.</p>
</dd>
</dl>
</div></blockquote>
<p><strong>Outputs</strong> :</p>
<blockquote>
<div><dl>
<dt>walk_data<span class="classifier"><cite>dict</cite></span></dt><dd><p>Dictionary of all x and y locations and travel times</p>
</dd>
</dl>
<p>Script saves result of each iteration to a folder with the figure
for each iteration as a png and the data with the particle locations
and travel times as a json text file.</p>
</div></blockquote>
</dd></dl>

</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">dorado</a></h1>








<h3>Navigation</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../install/index.html">Installation Instructions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart/index.html">Quickstart</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../background/index.html">Background</a></li>
<li class="toctree-l1"><a class="reference internal" href="../paper/index.html">Paper</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../userguide/index.html">User Guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../examples/index.html">Examples</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../misc/license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../misc/contributing.html">Contributing</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">API Reference</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../misc/acknowledgments.html">Acknowledgments</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="index.html">API Reference</a><ul>
      <li>Previous: <a href="particletools.html" title="previous chapter">dorado.particle_tools</a></li>
      <li>Next: <a href="parallelrouting.html" title="next chapter">dorado.parallel_routing</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2020, J. Hariharan, K. Wright, P. Passalacqua.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.0.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/apiref/routines.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>