
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>dorado.particle_tools &#8212; dorado 1.0.0 documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="dorado.routines" href="routines.html" />
    <link rel="prev" title="dorado.particle_track" href="particletrack.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="module-dorado.particle_tools">
<span id="dorado-particle-tools"></span><span id="particletools"></span><h1>dorado.particle_tools<a class="headerlink" href="#module-dorado.particle_tools" title="Permalink to this headline">¶</a></h1>
<p>Particle tools to manage the internal functions related to the routing.</p>
<p>Project Homepage: <a class="reference external" href="https://github.com/passaH2O/dorado">https://github.com/passaH2O/dorado</a></p>
<dl class="class">
<dt id="dorado.particle_tools.Tools">
<em class="property">class </em><code class="descclassname">dorado.particle_tools.</code><code class="descname">Tools</code><a class="reference internal" href="../_modules/dorado/particle_tools.html#Tools"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dorado.particle_tools.Tools" title="Permalink to this definition">¶</a></dt>
<dd><p>Class to hold the internal functions listed below.</p>
<blockquote>
<div><dl class="simple">
<dt><strong>random_pick_seed</strong> :</dt><dd><p>Random draw for initial particle location given a set of potential
locations or a region to seed particles</p>
</dd>
<dt><strong>get_weight</strong> :</dt><dd><p>Pull the weights for the random walk for surrounding cells and
choose the new cell location</p>
</dd>
<dt><strong>calculate_new_ind</strong> :</dt><dd><p>Calculate the new particle index locations</p>
</dd>
<dt><strong>step_update</strong> :</dt><dd><p>Checking that the new indices are in fact some distance away from
the previous particle location</p>
</dd>
<dt><strong>calc_travel_times</strong> :</dt><dd><p>Calculate the particle travel time to make the step from the
previous location to the new one by using the inverse of the
average velocity (averaged between the previous and new cell
locations)</p>
</dd>
<dt><strong>check_for_boundary</strong> :</dt><dd><p>Function to check and disallow particle to travel outside of the
domain</p>
</dd>
<dt><strong>random_pick</strong> :</dt><dd><p>Function to do the weighted random draw for the walk</p>
</dd>
</dl>
</div></blockquote>
<p>The <em>Tools</em> class is inherited by the <em>Particle</em> class which contains the
broader functions initializing the particle parameters (<em>__init__</em>) and to
do a single iteration of the particle transport (<strong>run_iteration</strong>)</p>
<dl class="attribute">
<dt id="dorado.particle_tools.Tools.__weakref__">
<code class="descname">__weakref__</code><a class="headerlink" href="#dorado.particle_tools.Tools.__weakref__" title="Permalink to this definition">¶</a></dt>
<dd><p>list of weak references to the object (if defined)</p>
</dd></dl>

<dl class="method">
<dt id="dorado.particle_tools.Tools.calc_travel_times">
<code class="descname">calc_travel_times</code><span class="sig-paren">(</span><em>new_cell</em>, <em>ind</em>, <em>new_ind</em>, <em>dist</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dorado/particle_tools.html#Tools.calc_travel_times"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dorado.particle_tools.Tools.calc_travel_times" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate travel time for particle to get to the new location.</p>
<p>Function to calculate the travel time for the particle to get from the
current location to the new location. Calculated by taking the inverse
of the velocity at the old and new locations.</p>
<p><strong>Inputs</strong> :</p>
<blockquote>
<div><dl>
<dt>new_cell<span class="classifier"><cite>int</cite></span></dt><dd><p>Integer 1-8 indicating new location in D-8 way</p>
</dd>
<dt>ind<span class="classifier"><cite>tuple</cite></span></dt><dd><p>Tuple (x,y) of the current location</p>
</dd>
<dt>new_ind<span class="classifier"><cite>tuple</cite></span></dt><dd><p>Tuple (x,y) of the new location</p>
</dd>
<dt>dist<span class="classifier"><cite>float</cite></span></dt><dd><p>Distance between current (old) and new particle location</p>
</dd>
</dl>
</div></blockquote>
<p><strong>Outputs</strong> :</p>
<blockquote>
<div><dl>
<dt>trav_time<span class="classifier"><cite>float</cite></span></dt><dd><p>Travel time it takes the particle to get from the current
location to the new proposed location using the inverse of the
average velocity</p>
</dd>
</dl>
</div></blockquote>
</dd></dl>

<dl class="method">
<dt id="dorado.particle_tools.Tools.calculate_new_ind">
<code class="descname">calculate_new_ind</code><span class="sig-paren">(</span><em>ind</em>, <em>new_cell</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dorado/particle_tools.html#Tools.calculate_new_ind"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dorado.particle_tools.Tools.calculate_new_ind" title="Permalink to this definition">¶</a></dt>
<dd><p>Add new cell location (1-8 value) to the previous index.</p>
<p><strong>Inputs</strong> :</p>
<blockquote>
<div><dl>
<dt>ind<span class="classifier"><cite>tuple</cite></span></dt><dd><p>Tuple (x,y) of old particle location</p>
</dd>
<dt>new_cell<span class="classifier"><cite>int</cite></span></dt><dd><p>Integer 1-8 indicating new cell location relative to the old
one in a D-8 sense</p>
</dd>
</dl>
</div></blockquote>
<p><strong>Outputs</strong> :</p>
<blockquote>
<div><dl>
<dt>new_ind<span class="classifier"><cite>tuple</cite></span></dt><dd><p>tuple (x,y) of the new particle location</p>
</dd>
</dl>
</div></blockquote>
</dd></dl>

<dl class="method">
<dt id="dorado.particle_tools.Tools.check_for_boundary">
<code class="descname">check_for_boundary</code><span class="sig-paren">(</span><em>new_inds</em>, <em>current_inds</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dorado/particle_tools.html#Tools.check_for_boundary"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dorado.particle_tools.Tools.check_for_boundary" title="Permalink to this definition">¶</a></dt>
<dd><p>Ensure new location is not a boundary cell.</p>
<p>Function to make sure particle is not exiting the boundary with the
proposed new location.</p>
<p><strong>Inputs</strong> :</p>
<blockquote>
<div><dl>
<dt>new_inds<span class="classifier"><cite>list</cite></span></dt><dd><p>List [] of tuples (x,y) of new indices</p>
</dd>
<dt>current_inds<span class="classifier"><cite>list</cite></span></dt><dd><p>List [] of tuples (x,y) of old indices</p>
</dd>
</dl>
</div></blockquote>
<p><strong>Outputs</strong> :</p>
<blockquote>
<div><dl>
<dt>new_inds<span class="classifier"><cite>list</cite></span></dt><dd><p>list [] of tuples (x,y) of new indices where any proposed
indices outside of the domain have been replaced by the old
indices so those particles will not travel this iteration</p>
</dd>
</dl>
</div></blockquote>
</dd></dl>

<dl class="method">
<dt id="dorado.particle_tools.Tools.get_weight">
<code class="descname">get_weight</code><span class="sig-paren">(</span><em>ind</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dorado/particle_tools.html#Tools.get_weight"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dorado.particle_tools.Tools.get_weight" title="Permalink to this definition">¶</a></dt>
<dd><p>Assign weights to cells surrounding current index.</p>
<p>Function to assign weights to the surrounding 8 cells around the
current index and randomly choose one of those cells.</p>
<p><strong>Inputs</strong> :</p>
<blockquote>
<div><dl>
<dt>ind<span class="classifier"><cite>tuple</cite></span></dt><dd><p>Tuple (x,y) with the current location indices</p>
</dd>
</dl>
</div></blockquote>
<p><strong>Outputs</strong> :</p>
<blockquote>
<div><dl>
<dt>new_cell<span class="classifier"><cite>int</cite></span></dt><dd><p>New location given as a value between 1 and 8 (inclusive)</p>
</dd>
</dl>
</div></blockquote>
</dd></dl>

<dl class="method">
<dt id="dorado.particle_tools.Tools.random_pick">
<code class="descname">random_pick</code><span class="sig-paren">(</span><em>probs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dorado/particle_tools.html#Tools.random_pick"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dorado.particle_tools.Tools.random_pick" title="Permalink to this definition">¶</a></dt>
<dd><p>Pick value from weighted probability array.</p>
<p>Randomly pick a number weighted by array probs (len 8)
Return the index of the selected weight in array probs</p>
<p><strong>Inputs</strong> :</p>
<blockquote>
<div><dl>
<dt>probs<span class="classifier"><cite>list</cite></span></dt><dd><p>8 values indicating the probability (weight) associated with
the surrounding cells for the random walk</p>
</dd>
</dl>
</div></blockquote>
<p><strong>Outputs</strong> :</p>
<blockquote>
<div><dl>
<dt>idx<span class="classifier"><cite>int</cite></span></dt><dd><p>1-8 value chosen randomly based on the weighted probabilities</p>
</dd>
</dl>
</div></blockquote>
</dd></dl>

<dl class="method">
<dt id="dorado.particle_tools.Tools.random_pick_seed">
<code class="descname">random_pick_seed</code><span class="sig-paren">(</span><em>choices</em>, <em>probs=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dorado/particle_tools.html#Tools.random_pick_seed"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dorado.particle_tools.Tools.random_pick_seed" title="Permalink to this definition">¶</a></dt>
<dd><p>Randomly pick a number from array of choices.</p>
<p><strong>Inputs</strong> :</p>
<blockquote>
<div><dl>
<dt>choices<span class="classifier"><cite>ndarray</cite></span></dt><dd><p>Array of possible values to draw from</p>
</dd>
<dt>probs<span class="classifier"><cite>ndarray</cite></span></dt><dd><p><em>Optional</em>, can add weighted probabilities to draw</p>
</dd>
</dl>
</div></blockquote>
<p><strong>Outputs</strong> :</p>
<blockquote>
<div><dl>
<dt>choices[idx]<span class="classifier"><cite>int</cite></span></dt><dd><p>The randomly chosen value</p>
</dd>
</dl>
</div></blockquote>
</dd></dl>

<dl class="method">
<dt id="dorado.particle_tools.Tools.single_iteration">
<code class="descname">single_iteration</code><span class="sig-paren">(</span><em>current_inds</em>, <em>travel_times</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dorado/particle_tools.html#Tools.single_iteration"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dorado.particle_tools.Tools.single_iteration" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate a single iteration of particle movement.</p>
<p><strong>Inputs</strong> :</p>
<blockquote>
<div><dl>
<dt>current_inds<span class="classifier"><cite>list</cite></span></dt><dd><p>List of tuples of the current particle (x,y) locations in space</p>
</dd>
<dt>travel_times<span class="classifier"><cite>list</cite></span></dt><dd><p>List of initial travel times for the particles</p>
</dd>
</dl>
</div></blockquote>
<p><strong>Outputs</strong> :</p>
<blockquote>
<div><dl>
<dt>new_inds<span class="classifier"><cite>list</cite></span></dt><dd><p>List of the new particle locations after the single iteration</p>
</dd>
<dt>travel_times<span class="classifier"><cite>list</cite></span></dt><dd><p>List of the travel times associated with the particle movements</p>
</dd>
</dl>
</div></blockquote>
</dd></dl>

<dl class="method">
<dt id="dorado.particle_tools.Tools.steep_descent">
<code class="descname">steep_descent</code><span class="sig-paren">(</span><em>probs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dorado/particle_tools.html#Tools.steep_descent"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dorado.particle_tools.Tools.steep_descent" title="Permalink to this definition">¶</a></dt>
<dd><p>Choose value with greatest probability, no longer random.</p>
<p>Pick the array value with the greatest probability, no longer a
stochastic process, instead just choosing the steepest descent</p>
<p><strong>Inputs</strong> :</p>
<blockquote>
<div><dl>
<dt>probs<span class="classifier"><cite>float</cite></span></dt><dd><p>8 values indicating probability (weight) associated with the
surrounding cells</p>
</dd>
</dl>
</div></blockquote>
<p><strong>Outputs</strong> :</p>
<blockquote>
<div><dl>
<dt>idx<span class="classifier"><cite>int</cite></span></dt><dd><p>1-8 value chosen by greatest probs</p>
</dd>
</dl>
</div></blockquote>
</dd></dl>

<dl class="method">
<dt id="dorado.particle_tools.Tools.step_update">
<code class="descname">step_update</code><span class="sig-paren">(</span><em>new_cell</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dorado/particle_tools.html#Tools.step_update"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dorado.particle_tools.Tools.step_update" title="Permalink to this definition">¶</a></dt>
<dd><p>Get distance to new particle location.</p>
<p>Function to check new location is some distance away from old one,
also provides way to track the travel distance of the particles</p>
<p><strong>Inputs</strong> :</p>
<blockquote>
<div><dl>
<dt>new_cell<span class="classifier"><cite>int</cite></span></dt><dd><p>Integer 1-8 indicating new location in D-8 way</p>
</dd>
</dl>
</div></blockquote>
<p><strong>Outputs</strong> :</p>
<blockquote>
<div><dl>
<dt>dist<span class="classifier"><cite>float</cite></span></dt><dd><p>Distance between current (old) and new particle location</p>
</dd>
</dl>
</div></blockquote>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="dorado.particle_tools.random">
<code class="descclassname">dorado.particle_tools.</code><code class="descname">random</code><span class="sig-paren">(</span><em>size=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dorado.particle_tools.random" title="Permalink to this definition">¶</a></dt>
<dd><p>Return random floats in the half-open interval [0.0, 1.0). Alias for
<cite>random_sample</cite> to ease forward-porting to the new random API.</p>
</dd></dl>

</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">dorado</a></h1>








<h3>Navigation</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../install/index.html">Installation Instructions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart/index.html">Quickstart</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../background/index.html">Background</a></li>
<li class="toctree-l1"><a class="reference internal" href="../paper/index.html">Paper</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../userguide/index.html">User Guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../examples/index.html">Examples</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../misc/license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../misc/contributing.html">Contributing</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">API Reference</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../misc/acknowledgments.html">Acknowledgments</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="index.html">API Reference</a><ul>
      <li>Previous: <a href="particletrack.html" title="previous chapter">dorado.particle_track</a></li>
      <li>Next: <a href="routines.html" title="next chapter">dorado.routines</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2020, J. Hariharan, K. Wright, P. Passalacqua.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.0.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/apiref/particletools.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>